---
UID: The unique id of the API.
title: The title of the API.
author: Authoring type of the API(ie windows-driver-content)
description: Description of API
old-location: 
old-project: 
ms.assetid: The MSDN ID of the API
ms.author: The Author of the API
ms.date: The date of API publishing
ms.keywords: 
ms.prod: windows-hardware
ms.technology: windows-devices
ms.topic: The topic type of the API (ie enum)
req.header: The main header of the API
req.include-header: The included headers of the API
req.target-type: 
req.target-min-winverclnt: 
req.target-min-winversvr: 
req.kmdf-ver: 
req.umdf-ver: 
req.ddi-compliance: 
req.unicode-ansi: 
req.idl: 
req.max-support: 
req.namespace: 
req.assembly: 
req.type-library: 
---

# SHQueryUserNotificationState function


## -description


Checks the state of the computer for the current user to determine whether sending a notification is appropriate.


## -parameters




### -param pquns [out]

Type: <b><a href="https://msdn.microsoft.com/b26439dd-6695-45d8-8c7f-5bbd5eaf5b54">QUERY_USER_NOTIFICATION_STATE</a>*</b>

When this function returns, contains a pointer to one of the values of the <a href="https://msdn.microsoft.com/b26439dd-6695-45d8-8c7f-5bbd5eaf5b54">QUERY_USER_NOTIFICATION_STATE</a> enumeration.


## -returns



Type: <b>HRESULT</b>

If this function succeeds, it returns <b xmlns:loc="http://microsoft.com/wdcml/l10n">S_OK</b>. Otherwise, it returns an <b xmlns:loc="http://microsoft.com/wdcml/l10n">HRESULT</b> error code.




## -remarks



Applications should call <b>SHQueryUserNotificationState</b> and test the return value before displaying any notification UI that is similar to the balloon notifications generated by <a href="https://msdn.microsoft.com/a316bc29-5f19-4a04-a32b-f4caeea0c029">Shell_NotifyIcon</a>. Notifications should only be displayed if this API returns <a href="https://msdn.microsoft.com/b26439dd-6695-45d8-8c7f-5bbd5eaf5b54">QNS_ACCEPTS_NOTIFICATIONS</a>. This informs the application whether the user is running processes that should not be interrupted. Top-level windows receive a <a href="https://msdn.microsoft.com/77174e06-a25b-440a-9e9c-4fd5979c433c">WM_SETTINGCHANGE</a> message when the user turns presentation settings on or off, and also when the user's session is locked or unlocked. Note that there are no notifications sent when the user starts or stops a full-screen application.

If this function returns <a href="https://msdn.microsoft.com/b26439dd-6695-45d8-8c7f-5bbd5eaf5b54">QUNS_QUIET_TIME</a>, notifications should be displayed only if critical.



